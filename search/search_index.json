{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"WSO2 Integrator: WebSubHub is a WebSub compliant hub implementation built on  Ballerina. It enables organizations to adopt event-driven architectures by supporting publish-subscribe communication over HTTP(S).  WebSubHub can be configured with the message broker of your choice as its persistence layer, making it ideal for scalable, real-time event distribution across services, applications, and systems.          Get Started \ud83d\ude80 <ul> <li> Introduction </li> <li> Quick Start Guide </li> </ul> Configurations \ud83d\udee0\ufe0f  <ul> <li> Connecting to an external IdP </li> <li> Apache Kafka connection configurations </li> </ul>"},{"location":"configurations/idp/","title":"Connect to an external IdP","text":"<p>WSO2 Integrator: WebSubHub can be configured to connect with an external Identity Provider (IdP) to enable authentication and authorization for its operations.</p> <p>This guide demonstrates how to integrate WSO2 Integrator: WebSubHub with WSO2 Identity Server (WSO2 IS) as the IdP. At the time of writing, the version used is WSO2 IS v7.1.</p> <p>Refer to the WSO2 Identity Server v7.1 official documentation to set up the server locally, then log in to the Identity Server Management Console.</p>"},{"location":"configurations/idp/#step-1-configure-the-identity-provider-idp","title":"Step 1: Configure the Identity Provider (IdP)","text":"<p>1. First navigate to the API Resources section and add a new API resource.</p> <p></p> <p>2. Add the Identifier and the Display Name and click on Next.</p> <p></p> <p>3. Add the required scopes and click Next. </p> <p>WSO2 Integrator: WebSubHub uses the following scopes: <code>register_topic</code>, <code>deregister_topic</code>, <code>subscribe</code>, <code>unsubscribe</code>, and <code>content_update</code>. Ensure these are added before proceeding.</p> <p></p> <p>4. Once completed click on Create.</p> <p></p> <p>5. Then navigate to the Applications tab and create a new application.</p> <p></p> <p>6. Select M2M Application from the options.</p> <p></p> <p>7. Update the name and click on Create.</p> <p></p> <p>8. Navigate to the Protocol section on the top navigation.</p> <p></p> <p>9. Update the Token Type to <code>JWT</code> and add an Audience called <code>websubhub</code>  and click Update.</p> <p></p> <p>10. Then navigate to the API Authorization section on the top navigation and click on + Authorize an API Resource.</p> <p></p> <p>11. Select the previously created WSO2 WebSubHub API resource from the drop down.</p> <p></p> <p>12. Click on Select All in the Authorized Scopes section and click on Finish.</p> <p></p> <p>13. Now use the following cURL command to retrieve the access token from the WSO2 Identity server.</p> <pre><code>    $ curl -u &lt;client-id&gt;:&lt;client-secret&gt; \\\n-d \"grant_type=client_credentials&amp;scope=&lt;scopes&gt;\" \\\nhttps://localhost:9443/oauth2/token -k\n</code></pre>"},{"location":"configurations/idp/#step-2-configure-the-wso2-integrator-websubhub","title":"Step 2: Configure the WSO2 Integrator: WebSubHub","text":"<p>Add the configurations related to the WebSubHub authentication in the <code>conf/Config.toml</code> and restart the WebSubHub.</p> <pre><code>    [websubhub.config.server.auth]\nissuer = \"https://localhost:9443/oauth2/token\"\naudience = \"websubhub\"\nsignature.url = \"https://localhost:9443/oauth2/jwks\"\nsignature.secureSocket.disable = true\n</code></pre>"},{"location":"configurations/idp/#step-3-invoke-wso2-integrator-websubhub-operations","title":"Step 3: Invoke WSO2 Integrator: WebSubHub operations","text":"<p>Use the following cURL command to retrieve an access token from the WSO2 Identity Server. In this example, the token is requested with the <code>register_topic</code> scope.</p> <pre><code>    $ curl -u &lt;client-id&gt;:&lt;client-secret&gt; \\\n-d \"grant_type=client_credentials&amp;scope=register_topic\" \\\nhttps://localhost:9443/oauth2/token -k\n</code></pre> <p>Use the access token obtained from the above cURL command to create a new topic.</p> <pre><code>    $ curl -X POST 'https://localhost:&lt;websubhub-port&gt;/hub' \\\n-H 'Content-Type: application/x-www-form-urlencoded' \\\n-H 'Authorization: Bearer &lt;access_token&gt;' \\\n-d 'hub.mode=register&amp;hub.topic=&lt;topic-name&gt;' -k\n</code></pre>"},{"location":"configurations/kafka/","title":"Connect to Apache Kafka","text":""},{"location":"configurations/kafka/#overview","title":"Overview","text":"<p>As outlined in the Introduction, WSO2 Integrator: WebSubHub supports using a message broker of choice as its persistence storage. Among the popular options, Apache Kafka is widely used. This guide explains the Apache Kafka\u2013related connection configuration options available in WSO2 Integrator: WebSubHub.</p>"},{"location":"configurations/kafka/#basic-configurations","title":"Basic configurations","text":""},{"location":"configurations/kafka/#connection-configurations","title":"Connection configurations","text":"<p>To update the basic Apache Kafka connection settings in WSO2 WebSubHub, update the following configuration section in the <code>websubhub-&lt;VERSION&gt;/conf/Config.toml</code> file.</p> <pre><code>    [websubhub.config.kafka.connection]\nbootstrapServers = &lt;kafka-bootstrap-nodes&gt;\n</code></pre> <p>To update the basic Apache Kafka connection settings in WSO2 WebSubHub Consolidator, update the following configuration section in the <code>websubhub-consolidator-&lt;VERSION&gt;/conf/Config.toml</code> file.</p> <pre><code>    [websubhub.consolidator.config.kafka.connection]\nbootstrapServers = &lt;kafka-bootstrap-nodes&gt;\n</code></pre> <p>Parameters</p> <ul> <li><code>bootstrapServers</code> - A comma-separated list of Kafka bootstrap nodes (e.g., \u201clocalhost:9092,localhost:9093\u201d)</li> </ul>"},{"location":"configurations/kafka/#consumer-configurations","title":"Consumer configurations","text":"<p>To update the Apache Kafka consumer settings in WSO2 WebSubHub, update the following configuration section in the <code>websubhub-&lt;VERSION&gt;/conf/Config.toml</code> file.</p> <pre><code>    [websubhub.config.kafka.consumer]\nmaxPollRecords = &lt;maximum-number-of-records-to-fetch-per-poll&gt;\npollingInterval = &lt;polling-interval-in-seconds&gt;\ngracefulClosePeriod = &lt;graceful-close-period-in-seconds&gt;\n</code></pre> <p>To update the Apache Kafka consumer settings in WSO2 WebSubHub Consolidator, update the following configuration section in the <code>websubhub-consolidator-&lt;VERSION&gt;/conf/Config.toml</code> file.</p> <pre><code>    [websubhub.consolidator.config.kafka.consumer]\nmaxPollRecords = &lt;maximum-number-of-records-to-fetch-per-poll&gt;\npollingInterval = &lt;polling-interval-in-seconds&gt;\ngracefulClosePeriod = &lt;graceful-close-period-in-seconds&gt;\n</code></pre> <p>Parameters</p> <ul> <li><code>maxPollRecords</code> - Maximum number of records returned in a single poll action from Kafka (e.g., 50)</li> <li><code>pollingInterval</code> - Interval (in seconds) between consecutive poll requests (e.g., 10.0)</li> <li><code>gracefulClosePeriod</code> - The time period (in seconds) gracefully shutdown the consumer (e.g., 5.0)</li> </ul>"},{"location":"configurations/kafka/#advanced-configurations","title":"Advanced configurations","text":""},{"location":"configurations/kafka/#configure-ssl-communication","title":"Configure SSL communication","text":"<p>Apache Kafka allows clients to use SSL encryption of traffic as well as authentication. WSO2 Integrator: WebSubHub can be configured to use SSL when communicating with Apache Kafka. Please follow the official documentation to understand how to configure SSL encryption of traffic in the broker level.</p> <p>To set up SSL encryption of traffic for WSO2 WebSubHub, update the following configuration section in the <code>websubhub-&lt;VERSION&gt;/conf/Config.toml</code> file.</p> <pre><code>    [websubhub.config.kafka.connection]\nbootstrapServers = &lt;kafka-bootstrap-nodes&gt;\nsecurityProtocol = \"SSL\"\n\n# Option 1: Configure SSL using a truststore\n[websubhub.config.kafka.connection.secureSocket]\ncert.path = &lt;path-to-kafka-client-truststore&gt;\ncert.password = &lt;truststore-password&gt;\nprotocol.name = \"SSL\"\n\n# Option 2: Configure SSL using the server certificate directly\n[websubhub.config.kafka.connection.secureSocket]\ncert = &lt;path-to-kafka-server-cert&gt;\nprotocol.name = \"SSL\"\n</code></pre> <p>To set up SSL encryption of traffic for WSO2 WebSubHub Consolidator, update the following configuration section in the <code>websubhub-consolidator-&lt;VERSION&gt;/conf/Config.toml</code> file.</p> <pre><code>    [websubhub.consolidator.config.kafka.connection]\nbootstrapServers = &lt;kafka-bootstrap-nodes&gt;\nsecurityProtocol = \"SSL\"\n\n# Option 1: Configure SSL using a truststore\n[websubhub.consolidator.config.kafka.connection.secureSocket]\ncert.path = &lt;path-to-kafka-client-truststore&gt;\ncert.password = &lt;truststore-password&gt;\nprotocol.name = \"SSL\"\n\n# Option 2: Configure SSL using the server certificate directly\n[websubhub.consolidator.config.kafka.connection.secureSocket]\ncert = &lt;path-to-kafka-server-cert&gt;\nprotocol.name = \"SSL\"\n</code></pre> <p>Kafka Connection Parameters</p> <ul> <li><code>securityProtocol</code> - Protocol used to communicate with Kafka brokers. Supported values are <code>PLAINTEXT</code>, <code>SSL</code>, <code>SASL_PLAINTEXT</code>, and <code>SASL_SSL</code>. Since this setup requires a secure connection, use <code>SSL</code>.</li> </ul> <p>Secure Socket Parameters</p> <ul> <li><code>cert</code> - Path to the Kafka broker certificate file (e.g., /home/user/broker.crt)</li> <li><code>cert.path</code> - Path to the Kafka client truststore file (e.g., /home/user/client.truststore.jks).</li> <li><code>cert.password</code> - Password to access the truststore file.</li> <li><code>protocol.name</code> - The relevant security protocol.</li> </ul> <p>Note: Choose either the truststore-based approach or the certificate-based approach, depending on your setup. Ensure that only one approach is configured at a time.</p>"},{"location":"configurations/kafka/#configure-ssl-based-authentication","title":"Configure SSL based authentication","text":"<p>In addition to encrypting traffic, Apache Kafka supports client authentication over SSL, ensuring that only trusted clients can connect to the cluster. WSO2 Integrator: WebSubHub can be configured to use SSL certificates for authentication when connecting to Kafka.</p> <p>To set up SSL based authentication for WSO2 WebSubHub, update the following configuration section in the <code>websubhub-&lt;VERSION&gt;/conf/Config.toml</code> file.</p> <pre><code>    [websubhub.config.kafka.connection]\nbootstrapServers = &lt;kafka-bootstrap-nodes&gt;\nsecurityProtocol = \"SSL\"\n\n[websubhub.config.kafka.connection.secureSocket]\ncert.path = &lt;path-to-kafka-client-truststore&gt;\ncert.password = &lt;truststore-password&gt;\nkey.keyStore.path = &lt;path-to-kafka-client-keystore&gt;\nkey.keyStore.password = &lt;keystore-password&gt;\nprotocol.name = \"SSL\"\n</code></pre> <p>To set up SSL based authentication for WSO2 WebSubHub Consolidator, update the following configuration section in the <code>websubhub-consolidator-&lt;VERSION&gt;/conf/Config.toml</code> file.</p> <pre><code>    [websubhub.consolidator.config.kafka.connection]\nbootstrapServers = &lt;kafka-bootstrap-nodes&gt;\nsecurityProtocol = \"SSL\"\n\n[websubhub.consolidator.config.kafka.connection.secureSocket]\ncert.path = &lt;path-to-kafka-client-truststore&gt;\ncert.password = &lt;truststore-password&gt;\nkey.keyStore.path = &lt;path-to-kafka-client-keystore&gt;\nkey.keyStore.password = &lt;keystore-password&gt;\nprotocol.name = \"SSL\"\n</code></pre> <p>Secure Socket Parameters</p> <ul> <li><code>key.keyStore.path</code> - Path to the Kafka client truststore file (e.g., /home/user/client.keystore.jks).</li> <li><code>key.keyStore.password</code> - Password to access the keystore file.</li> <li><code>key.keyPassword</code> (optional) - Optional configuration to set the password for the key.</li> </ul>"},{"location":"get-started/introduction/","title":"Introduction","text":""},{"location":"get-started/introduction/#what-is-websub","title":"What is WebSub ?","text":"<p>WebSub is a W3C recommendation that defines a simple, open, and decentralized protocol for real-time publisher-subscriber communication over HTTP(S). </p> <p>In WebSub, publishers and subscribers are decoupled through an intermediary called a Hub. The Hub, which functions similar to a lightweight message broker, receives content updates for topics from publishers and distributes them to all registered subscribers.</p> <p>This model enables low-latency content delivery, reduces unnecessary network traffic, and provides a standardized way to build event-driven systems on top of HTTP(S).</p>"},{"location":"get-started/introduction/#what-can-i-use-websub-for","title":"What can I use WebSub for ?","text":"<p>WebSub enables real-time event streaming over HTTP(S) and can be applied across a variety of industries and organizations. Some common use cases include:</p> <ul> <li>To serve as a foundation for building event-driven architectures over the web.</li> <li>To notify apps, websites, or partners about new orders, inventory changes, or price updates in retail and e-commerce platforms.</li> <li>To stream system alerts and notifications, such as operational status, downtime alerts, or performance metrics to dashboards, mobile apps, or administrative teams in real-time.</li> <li>To push updates from news sites, or media outlets to subscribers in real-time.</li> </ul>"},{"location":"get-started/introduction/#what-is-wso2-integrator-websubhub","title":"What is WSO2 Integrator: WebSubHub ?","text":"<p>WSO2 Integrator: WebSubHub is a WebSub compliant hub implementation written in Ballerina programming language. It enables organizations to adopt event-driven architectures by supporting publish-subscribe communication over HTTP(S). WSO2 Integrator: WebSubHub can be configured with the message broker of your choice as its persistence layer, making it ideal for scalable, real-time event distribution across services, applications, and systems.</p>"},{"location":"get-started/introduction/#how-does-it-work","title":"How does it work ?","text":"<p>The WSO2 Integrator: WebSubHub distribution is composed of two main components: the WebSubHub and the Consolidator. The WebSubHub is a WebSub-compliant hub implementation that manages topics, processes subscription requests, and delivers content updates to subscribers. The Consolidator is responsible for managing the overall system state.</p> <p>The WSO2 Integrator: WebSubHub system uses a message broker as its persistence layer. Messages related to topics, as well as system state information such as registered topics and subscriptions, are stored within broker topics. This approach ensures fault tolerance, scalability, and a clean event-driven architecture.</p> <p></p>"},{"location":"get-started/introduction/#main-concepts-and-terminology","title":"Main concepts and terminology","text":""},{"location":"get-started/introduction/#topic","title":"Topic","text":"<p>Represents the resource that subscribers are interested in receiving real-time notifications about.</p>"},{"location":"get-started/introduction/#message","title":"Message","text":"<p>The content delivered to subscribers when a topic is changed or updated. It usually contains the updated resource or a notification containing the updated state of the resource.</p>"},{"location":"get-started/introduction/#publisher","title":"Publisher","text":"<p>The entity that creates and maintains a topic. Whenever the publisher updates the content, it notifies the hub that a new message is available for that topic.</p>"},{"location":"get-started/introduction/#subscriber","title":"Subscriber","text":"<p>A client or application that wants to receive real-time updates about a topic. It subscribes to a topic via the hub and receives messages whenever the topic is updated.</p>"},{"location":"get-started/introduction/#hub","title":"Hub","text":"<p>The intermediary that manages subscriptions and distributes messages. Publishers notify the hub of updates, and the hub pushes these updates to all registered subscribers.</p>"},{"location":"get-started/introduction/#features","title":"Features","text":"<ul> <li>At-least-once message delivery guarantee for subscribers.</li> <li>Automatic retries for message delivery in case of transient subscriber endpoint failures.</li> <li>Failure recovery and seamless resumption of operations with minimal or no downtime.</li> <li>Seamlessly integrates with external IdPs to provide authentication and authorization for publishers and subscribers.</li> </ul>"},{"location":"get-started/introduction/#where-to-from-now","title":"Where to from now ?","text":"<p>To get hands-on experience with WSO2 Integrator: WebSubHub, follow the Quick Start Guide.</p>"},{"location":"get-started/quickstart/","title":"Quick Start Guide","text":""},{"location":"get-started/quickstart/#step-1-set-up-the-message-broker","title":"Step 1: Set up the message broker","text":"<p>As discussed in the Introduction section WSO2 Integrator: WebSubHub uses a message broker as its persistence layer. As per this guide, we will use Apache Kafka as the message broker.</p> <ul> <li>Download Apache Kafka from the official site or run it as a Docker container. For more information, please refer to the official documentation.</li> </ul>"},{"location":"get-started/quickstart/#step-2-get-wso2-integrator-websubhub","title":"Step 2: Get WSO2 Integrator: WebSubHub","text":"<p>Download the latest version of WSO2 Integrator: WebSubHub distribution and extract it.</p> <pre><code>    $ unzip wso2websubhub-distribution-1.0.0.zip\n    $ cd wso2websubhub-distribution-1.0.0\n</code></pre> <p>The distribution includes two components: WSO2 WebSubHub and WSO2 WebSubHub Consolidator.</p>"},{"location":"get-started/quickstart/#step-3-configure-wso2-integrator-websubhub","title":"Step 3: Configure WSO2 Integrator: WebSubHub","text":""},{"location":"get-started/quickstart/#configure-websubhub-consolidator","title":"Configure WebSubHub Consolidator","text":"<p>Go into the <code>wso2websubhub-consolidator-1.0.0</code> directory.</p> <pre><code>    $ cd wso2websubhub-consolidator-1.0.0\n</code></pre> <p>Update the configurations related to the WebSubHub Consolidator server port in the <code>conf/Config.toml</code>.</p> <pre><code>    [websubhub.consolidator.config.server]\nport = &lt;port-to-start-websubhub-consolidator-endpoint&gt;\n</code></pre> <p>Update the configurations related to broker connection in the <code>conf/Config.toml</code></p> <pre><code>    [websubhub.consolidator.config.kafka.connection]\nbootstrapServers = \"&lt;kafka-bootstrap-server-url&gt;\"\n</code></pre>"},{"location":"get-started/quickstart/#configure-websubhub","title":"Configure WebSubHub","text":"<p>Go into the <code>wso2websubhub-1.0.0</code> directory.</p> <pre><code>    $ cd wso2websubhub-1.0.0\n</code></pre> <p>Update the configurations related to the WebSubHub server port in the <code>conf/Config.toml</code>.</p> <pre><code>    [websubhub.config.server]\nport = &lt;port-to-start-the-websubhub&gt;\n</code></pre> <p>Update the configurations related to the state-snapshot endpoint in the <code>conf/Config.toml</code>.</p> <pre><code>    [websubhub.config.state.snapshot]\n# WebSubHub consolidator endpoint (eg: http://localhost:10001)\nurl = \"&lt;websubhub-consolidator-state-snapshot-endpoint&gt;\"\n</code></pre> <p>Update the configurations related to broker connection in the <code>conf/Config.toml</code>.</p> <pre><code>    [websubhub.config.kafka.connection]\nbootstrapServers = \"&lt;kafka-bootstrap-server-url&gt;\"\n</code></pre>"},{"location":"get-started/quickstart/#step-4-start-wso2-integrator-websubhub","title":"Step 4: Start WSO2 Integrator: WebSubHub","text":"<p>Start the WSO2 WebSubHub Consolidator.</p> <pre><code>    $ cd wso2websubhub-consolidator-1.0.0\n    $ ./bin/wso2websubhub-consolidator.sh\n</code></pre> <p>Start the WSO2 WebSubHub.</p> <pre><code>    $ cd wso2websubhub-1.0.0\n    $ ./bin/wso2server.sh\n</code></pre>"},{"location":"get-started/quickstart/#step-5-invoke-publisher-operations","title":"Step 5: Invoke publisher operations","text":"<p>Register a topic in the WSO2 WebSubHub.</p> <pre><code>    $ curl -X POST https://localhost:&lt;websubhub-port&gt;/hub \\\n-H \"Content-Type: application/x-www-form-urlencoded\" \\\n-d \"hub.mode=register\" \\\n-d \"hub.topic=&lt;topic-name&gt;\" \\\n-k\n</code></pre> <p>Publish content to the WSO2 WebSubHub.</p> <pre><code>    $ curl -X POST \"https://localhost:&lt;websubhub-port&gt;/hub?hub.mode=publish&amp;hub.topic=&lt;topic-name&gt;\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\n            \"message\": \"This is a test message\"\n        }' \\\n-k\n</code></pre>"},{"location":"get-started/quickstart/#step-6-register-a-subscriber","title":"Step 6: Register a subscriber","text":"<p>Go to https://webhook.site/ and create a new webhook with the following configurations.</p> <p></p> <p>Copy the unique URL.</p> <p></p> <p>URL-encode the copied unique URL and refer to it as <code>encoded-callback-url</code>.</p> <p>Initiate the subscription call using the following cURL.</p> <pre><code>    $ curl -X POST \"https://localhost:&lt;websubhub-port&gt;/hub\" \\\n-H \"Content-Type: application/x-www-form-urlencoded\" \\\n-d \"hub.topic=&lt;topic-name&gt;\" \\\n-d \"hub.callback=&lt;encoded-callback-url&gt;\" \\\n-d \"hub.mode=subscribe\" \\\n-d \"hub.secret=&lt;subscriber-secret&gt;\" \\\n-d \"hub.lease_seconds=50000000\" \\\n-k\n</code></pre> <p>Publish the content to the relevant topic in WSO2 WebSubHub, and you can view the delivered content in the configured webhook endpoint.</p> <p></p>"},{"location":"get-started/quickstart/#congratulations","title":"Congratulations","text":"<p>You have successfully completed <code>WSO2 Integrator: WebSubHub</code> quick start guide. </p> <p>See the Configurations section for more information on:</p> <ul> <li>Configuring an external IdP for authentication and authorization</li> <li>Comprehensive Guide to Apache Kafka configurations</li> </ul>"}]}